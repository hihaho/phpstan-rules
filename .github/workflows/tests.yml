  on:
    push:
    pull_request:
    workflow_dispatch:

  jobs:
    run_tests:
      runs-on: ubuntu-22.04
      steps:
        - uses: actions/checkout@v4.0.0
          with:
            fetch-depth: 1

        - name: Setup PHP
          uses: shivammathur/setup-php@2.26.0
          with:
            php-version: 8.2
            coverage: none
            tools: composer:v2,phpunit

        - name: Check security advisories
          run: composer update --dry-run roave/security-advisories

        - name: Run tests
          run: composer test
